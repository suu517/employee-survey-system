<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>従業員調査 管理者ダッシュボード</title>
    <link rel="stylesheet" href="admin-style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- ヘッダー -->
        <header class="dashboard-header">
            <div class="header-content">
                <div class="logo-section">
                    <h1>📊 従業員調査 管理者ダッシュボード</h1>
                    <p>Employee Satisfaction Survey Dashboard</p>
                </div>
                <div class="header-actions">
                    <button class="action-button refresh-button" onclick="refreshData()">
                        🔄 データ更新
                    </button>
                    <button class="action-button url-button" onclick="openUrlModal()">
                        🔗 URL管理
                    </button>
                    <button class="action-button export-button" onclick="exportData()">
                        📥 エクスポート
                    </button>
                    <a href="index.html" class="action-button survey-button">
                        📝 調査回答
                    </a>
                </div>
            </div>
        </header>

        <!-- タブナビゲーション -->
        <nav class="tab-navigation">
            <button class="tab-btn active" onclick="showTab('dashboard')">📊 ダッシュボード</button>
            <button class="tab-btn" onclick="showTab('companies')">🏢 企業管理</button>
        </nav>

        <!-- タブコンテンツ -->
        <div class="tab-content-container">
            <!-- ダッシュボードタブ -->
            <div id="dashboard" class="tab-content active">
                <!-- サマリーカード -->
                <div class="summary-section">
            <div class="summary-cards">
                <div class="summary-card">
                    <div class="card-icon">👥</div>
                    <div class="card-content">
                        <div class="card-value" id="totalResponses">150</div>
                        <div class="card-label">総回答数</div>
                        <div class="card-change positive">+12 (今週)</div>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="card-icon">📈</div>
                    <div class="card-content">
                        <div class="card-value" id="completionRate">87%</div>
                        <div class="card-label">回答完了率</div>
                        <div class="card-change positive">+3.2%</div>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="card-icon">⭐</div>
                    <div class="card-content">
                        <div class="card-value" id="avgSatisfaction">3.6</div>
                        <div class="card-label">平均満足度</div>
                        <div class="card-change neutral">+0.1</div>
                    </div>
                </div>

                <div class="summary-card">
                    <div class="card-icon">🎯</div>
                    <div class="card-content">
                        <div class="card-value" id="npsScore">+23</div>
                        <div class="card-label">NPS スコア</div>
                        <div class="card-change positive">+5</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- フィルター -->
        <div class="filters-section">
            <div class="filters-container">
                <div class="filter-group">
                    <label for="departmentFilter">事業部</label>
                    <select id="departmentFilter" onchange="applyFilters()">
                        <option value="all">全体</option>
                        <option value="営業部">営業部</option>
                        <option value="マーケティング部">マーケティング部</option>
                        <option value="開発部">開発部</option>
                        <option value="人事部">人事部</option>
                        <option value="経理・財務部">経理・財務部</option>
                        <option value="総務部">総務部</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="positionFilter">役職</label>
                    <select id="positionFilter" onchange="applyFilters()">
                        <option value="all">全体</option>
                        <option value="一般社員">一般社員</option>
                        <option value="主任・リーダー">主任・リーダー</option>
                        <option value="係長・課長代理">係長・課長代理</option>
                        <option value="課長">課長</option>
                        <option value="部長">部長</option>
                        <option value="役員">役員</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="employmentFilter">雇用形態</label>
                    <select id="employmentFilter" onchange="applyFilters()">
                        <option value="all">全体</option>
                        <option value="正社員">正社員</option>
                        <option value="契約社員">契約社員</option>
                        <option value="派遣社員">派遣社員</option>
                        <option value="パート・アルバイト">パート・アルバイト</option>
                    </select>
                </div>

                <div class="filter-group">
                    <label for="periodFilter">期間</label>
                    <select id="periodFilter" onchange="applyFilters()">
                        <option value="all">全期間</option>
                        <option value="last_month">過去1ヶ月</option>
                        <option value="last_3months">過去3ヶ月</option>
                        <option value="last_year">過去1年</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- チャート表示エリア -->
        <div class="charts-section">
            <div class="charts-grid">
                <!-- 総合評価グラフ -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>📊 総合評価分布</h3>
                        <div class="chart-info">
                            <span class="info-badge">回答数: 150</span>
                        </div>
                    </div>
                    <div class="chart-content">
                        <canvas id="overallSatisfactionChart"></canvas>
                    </div>
                </div>

                <!-- 部署別満足度 -->
                <div class="chart-container">
                    <div class="chart-header">
                        <h3>🏢 部署別満足度</h3>
                        <div class="chart-info">
                            <span class="info-badge">平均値比較</span>
                        </div>
                    </div>
                    <div class="chart-content">
                        <canvas id="departmentSatisfactionChart"></canvas>
                    </div>
                </div>

                <!-- 満足度vs期待度 -->
                <div class="chart-container wide">
                    <div class="chart-header">
                        <h3>⚖️ 満足度 vs 期待度 分析</h3>
                        <div class="chart-info">
                            <span class="info-badge">ギャップ分析</span>
                        </div>
                    </div>
                    <div class="chart-content">
                        <canvas id="satisfactionExpectationChart"></canvas>
                    </div>
                </div>

                <!-- トレンド分析 -->
                <div class="chart-container wide">
                    <div class="chart-header">
                        <h3>📈 満足度トレンド</h3>
                        <div class="chart-info">
                            <span class="info-badge">時系列分析</span>
                        </div>
                    </div>
                    <div class="chart-content">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- 詳細分析セクション -->
        <div class="analysis-section">
            <div class="analysis-grid">
                <!-- 上位満足項目 -->
                <div class="analysis-card">
                    <h3>✅ 満足度上位項目</h3>
                    <div class="ranking-list">
                        <div class="ranking-item">
                            <span class="rank">1</span>
                            <span class="item-text">人間関係が良好な職場</span>
                            <span class="score">4.2</span>
                        </div>
                        <div class="ranking-item">
                            <span class="rank">2</span>
                            <span class="item-text">有給休暇がちゃんと取れる職場</span>
                            <span class="score">4.1</span>
                        </div>
                        <div class="ranking-item">
                            <span class="rank">3</span>
                            <span class="item-text">充実した福利厚生がある職場</span>
                            <span class="score">4.0</span>
                        </div>
                        <div class="ranking-item">
                            <span class="rank">4</span>
                            <span class="item-text">事業基盤について安心感のある会社</span>
                            <span class="score">3.9</span>
                        </div>
                        <div class="ranking-item">
                            <span class="rank">5</span>
                            <span class="item-text">法令遵守が整った会社</span>
                            <span class="score">3.8</span>
                        </div>
                    </div>
                </div>

                <!-- 改善優先項目 -->
                <div class="analysis-card">
                    <h3>⚠️ 改善優先項目</h3>
                    <div class="ranking-list improvement">
                        <div class="ranking-item">
                            <span class="rank">1</span>
                            <span class="item-text">成果に応じて早期の昇給・昇格が望める職場</span>
                            <span class="score gap">-1.8</span>
                        </div>
                        <div class="ranking-item">
                            <span class="rank">2</span>
                            <span class="item-text">自身の行った仕事が正当に評価される職場</span>
                            <span class="score gap">-1.6</span>
                        </div>
                        <div class="ranking-item">
                            <span class="rank">3</span>
                            <span class="item-text">残業したらその分しっかり給与が支払われる職場</span>
                            <span class="score gap">-1.4</span>
                        </div>
                        <div class="ranking-item">
                            <span class="rank">4</span>
                            <span class="item-text">自分のキャパシティーに合った量の仕事で働ける職場</span>
                            <span class="score gap">-1.3</span>
                        </div>
                        <div class="ranking-item">
                            <span class="rank">5</span>
                            <span class="item-text">整った教育体制がある職場</span>
                            <span class="score gap">-1.2</span>
                        </div>
                    </div>
                </div>

                <!-- NPSセグメント分析 -->
                <div class="analysis-card">
                    <h3>🎯 NPS セグメント分析</h3>
                    <div class="nps-breakdown">
                        <div class="nps-segment promoter">
                            <div class="segment-label">推奨者 (9-10点)</div>
                            <div class="segment-value">32%</div>
                            <div class="segment-count">48名</div>
                        </div>
                        <div class="nps-segment neutral">
                            <div class="segment-label">中立者 (7-8点)</div>
                            <div class="segment-value">59%</div>
                            <div class="segment-count">89名</div>
                        </div>
                        <div class="nps-segment detractor">
                            <div class="segment-label">批判者 (0-6点)</div>
                            <div class="segment-value">9%</div>
                            <div class="segment-count">13名</div>
                        </div>
                    </div>
                    <div class="nps-score-display">
                        <span class="nps-label">NPS スコア</span>
                        <span class="nps-value">+23</span>
                    </div>
                </div>

                <!-- 自由記述分析 -->
                <div class="analysis-card wide">
                    <h3>💬 自由記述 キーワード分析</h3>
                    <div class="keyword-cloud">
                        <span class="keyword high">給与・報酬 (78件)</span>
                        <span class="keyword medium">評価制度 (56件)</span>
                        <span class="keyword high">労働時間 (45件)</span>
                        <span class="keyword low">教育・研修 (34件)</span>
                        <span class="keyword medium">人間関係 (31件)</span>
                        <span class="keyword low">キャリア (28件)</span>
                        <span class="keyword medium">福利厚生 (25件)</span>
                        <span class="keyword low">働き方 (22件)</span>
                        <span class="keyword medium">上司・管理職 (19件)</span>
                        <span class="keyword low">職場環境 (16件)</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 15カテゴリ詳細分析セクション -->
        <div class="categories-section">
            <div class="section-header">
                <h2>📋 15カテゴリ詳細分析</h2>
                <div class="section-controls">
                    <div class="view-toggle">
                        <button class="toggle-btn active" onclick="switchCategoryView('overview')" id="overviewToggle">概要</button>
                        <button class="toggle-btn" onclick="switchCategoryView('detailed')" id="detailedToggle">詳細</button>
                        <button class="toggle-btn" onclick="switchCategoryView('comparison')" id="comparisonToggle">比較</button>
                    </div>
                    <div class="analysis-filters">
                        <select id="categoryFilter" onchange="updateCategoryView()">
                            <option value="all">全カテゴリ</option>
                            <option value="worklife_balance">勤務時間・働き方</option>
                            <option value="compensation">待遇・評価</option>
                            <option value="workload_stress">業務量・ストレス</option>
                            <option value="growth_development">成長・能力開発</option>
                            <option value="job_satisfaction">仕事のやりがい</option>
                            <option value="relationships_culture">人間関係・企業文化</option>
                            <option value="company_business">会社・事業</option>
                        </select>
                        <button class="export-category-btn" onclick="exportCategoryData()">📊 データ出力</button>
                    </div>
                </div>
            </div>

            <!-- カテゴリ概要ビュー -->
            <div id="categoryOverviewView" class="category-view active">
                <div class="category-cards-grid">
                    <!-- 勤務時間・働き方 -->
                    <div class="category-card" data-category="worklife_balance">
                        <div class="category-header">
                            <h3>🕒 勤務時間・働き方</h3>
                            <div class="category-scores">
                                <span class="satisfaction-score">満足度: 3.4</span>
                                <span class="expectation-score">期待度: 4.2</span>
                                <span class="gap-score negative">ギャップ: -0.8</span>
                            </div>
                        </div>
                        <div class="category-chart-mini">
                            <canvas id="worklifeBalanceChart"></canvas>
                        </div>
                        <div class="category-summary">
                            <div class="top-item positive">👍 残業時間の適正さ (3.8)</div>
                            <div class="bottom-item negative">👎 フレキシブルな働き方 (2.9)</div>
                        </div>
                    </div>

                    <!-- 待遇・評価 -->
                    <div class="category-card" data-category="compensation">
                        <div class="category-header">
                            <h3>💰 待遇・評価</h3>
                            <div class="category-scores">
                                <span class="satisfaction-score">満足度: 3.1</span>
                                <span class="expectation-score">期待度: 4.5</span>
                                <span class="gap-score negative">ギャップ: -1.4</span>
                            </div>
                        </div>
                        <div class="category-chart-mini">
                            <canvas id="compensationChart"></canvas>
                        </div>
                        <div class="category-summary">
                            <div class="top-item positive">👍 福利厚生の充実 (3.6)</div>
                            <div class="bottom-item negative">👎 昇給・昇格制度 (2.4)</div>
                        </div>
                    </div>

                    <!-- 業務量・ストレス -->
                    <div class="category-card" data-category="workload_stress">
                        <div class="category-header">
                            <h3>⚡ 業務量・ストレス</h3>
                            <div class="category-scores">
                                <span class="satisfaction-score">満足度: 3.2</span>
                                <span class="expectation-score">期待度: 4.1</span>
                                <span class="gap-score negative">ギャップ: -0.9</span>
                            </div>
                        </div>
                        <div class="category-chart-mini">
                            <canvas id="workloadStressChart"></canvas>
                        </div>
                        <div class="category-summary">
                            <div class="top-item positive">👍 精神的負荷の適正さ (3.5)</div>
                            <div class="bottom-item negative">👎 業務量の適正さ (2.8)</div>
                        </div>
                    </div>

                    <!-- 成長・能力開発 -->
                    <div class="category-card" data-category="growth_development">
                        <div class="category-header">
                            <h3>📈 成長・能力開発</h3>
                            <div class="category-scores">
                                <span class="satisfaction-score">満足度: 3.0</span>
                                <span class="expectation-score">期待度: 4.3</span>
                                <span class="gap-score negative">ギャップ: -1.3</span>
                            </div>
                        </div>
                        <div class="category-chart-mini">
                            <canvas id="growthDevelopmentChart"></canvas>
                        </div>
                        <div class="category-summary">
                            <div class="top-item positive">👍 実務経験による成長 (3.4)</div>
                            <div class="bottom-item negative">👎 教育研修制度 (2.5)</div>
                        </div>
                    </div>

                    <!-- 仕事のやりがい -->
                    <div class="category-card" data-category="job_satisfaction">
                        <div class="category-header">
                            <h3>⭐ 仕事のやりがい</h3>
                            <div class="category-scores">
                                <span class="satisfaction-score">満足度: 3.6</span>
                                <span class="expectation-score">期待度: 4.1</span>
                                <span class="gap-score negative">ギャップ: -0.5</span>
                            </div>
                        </div>
                        <div class="category-chart-mini">
                            <canvas id="jobSatisfactionChart"></canvas>
                        </div>
                        <div class="category-summary">
                            <div class="top-item positive">👍 社会貢献実感 (4.0)</div>
                            <div class="bottom-item negative">👎 裁量の大きさ (3.1)</div>
                        </div>
                    </div>

                    <!-- 人間関係・企業文化 -->
                    <div class="category-card" data-category="relationships_culture">
                        <div class="category-header">
                            <h3>👥 人間関係・企業文化</h3>
                            <div class="category-scores">
                                <span class="satisfaction-score">満足度: 3.8</span>
                                <span class="expectation-score">期待度: 4.0</span>
                                <span class="gap-score negative">ギャップ: -0.2</span>
                            </div>
                        </div>
                        <div class="category-chart-mini">
                            <canvas id="relationshipsCultureChart"></canvas>
                        </div>
                        <div class="category-summary">
                            <div class="top-item positive">👍 同僚との関係性 (4.1)</div>
                            <div class="bottom-item negative">👎 風通しの良さ (3.4)</div>
                        </div>
                    </div>

                    <!-- 会社・事業 -->
                    <div class="category-card" data-category="company_business">
                        <div class="category-header">
                            <h3>🏢 会社・事業</h3>
                            <div class="category-scores">
                                <span class="satisfaction-score">満足度: 3.7</span>
                                <span class="expectation-score">期待度: 3.9</span>
                                <span class="gap-score negative">ギャップ: -0.2</span>
                            </div>
                        </div>
                        <div class="category-chart-mini">
                            <canvas id="companyBusinessChart"></canvas>
                        </div>
                        <div class="category-summary">
                            <div class="top-item positive">👍 事業基盤の安定性 (4.0)</div>
                            <div class="bottom-item negative">👎 競合優位性 (3.3)</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- カテゴリ詳細ビュー -->
            <div id="categoryDetailedView" class="category-view">
                <div class="detailed-analysis-grid">
                    <!-- 満足度vs期待度散布図 -->
                    <div class="analysis-chart-container">
                        <div class="chart-header">
                            <h3>📊 満足度 vs 期待度 散布図</h3>
                            <div class="chart-legend">
                                <span class="legend-item high">高優先 (期待度高・満足度低)</span>
                                <span class="legend-item maintain">維持 (期待度高・満足度高)</span>
                                <span class="legend-item monitor">監視 (期待度低・満足度低)</span>
                                <span class="legend-item stable">安定 (期待度低・満足度高)</span>
                            </div>
                        </div>
                        <div class="chart-content">
                            <canvas id="satisfactionExpectationScatter"></canvas>
                        </div>
                    </div>

                    <!-- カテゴリ別レーダーチャート -->
                    <div class="analysis-chart-container">
                        <div class="chart-header">
                            <h3>🎯 カテゴリ別レーダーチャート</h3>
                            <div class="radar-controls">
                                <label>
                                    <input type="checkbox" id="showSatisfaction" checked onchange="updateRadarChart()"> 満足度
                                </label>
                                <label>
                                    <input type="checkbox" id="showExpectation" checked onchange="updateRadarChart()"> 期待度
                                </label>
                            </div>
                        </div>
                        <div class="chart-content">
                            <canvas id="categoryRadarChart"></canvas>
                        </div>
                    </div>

                    <!-- ギャップ分析ヒートマップ -->
                    <div class="analysis-chart-container wide">
                        <div class="chart-header">
                            <h3>🌡️ 満足度・期待度ギャップ ヒートマップ</h3>
                            <div class="heatmap-legend">
                                <span class="heatmap-scale">
                                    <span class="scale-item" style="background: #d73027">-2.0</span>
                                    <span class="scale-item" style="background: #f46d43">-1.5</span>
                                    <span class="scale-item" style="background: #fdae61">-1.0</span>
                                    <span class="scale-item" style="background: #fee08b">-0.5</span>
                                    <span class="scale-item" style="background: #ffffbf">0.0</span>
                                    <span class="scale-item" style="background: #d9ef8b">+0.5</span>
                                    <span class="scale-item" style="background: #a6d96a">+1.0</span>
                                </span>
                            </div>
                        </div>
                        <div class="heatmap-container">
                            <div id="categoryHeatmap"></div>
                        </div>
                    </div>

                    <!-- 改善優先度マトリックス -->
                    <div class="analysis-chart-container">
                        <div class="chart-header">
                            <h3>🚀 改善優先度マトリックス</h3>
                            <div class="matrix-description">
                                横軸: 改善難易度 / 縦軸: 影響度
                            </div>
                        </div>
                        <div class="chart-content">
                            <canvas id="improvementMatrix"></canvas>
                        </div>
                    </div>

                    <!-- トレンド分析 -->
                    <div class="analysis-chart-container">
                        <div class="chart-header">
                            <h3>📈 カテゴリ別トレンド分析</h3>
                            <div class="trend-controls">
                                <select id="trendPeriod" onchange="updateTrendChart()">
                                    <option value="3months">過去3ヶ月</option>
                                    <option value="6months">過去6ヶ月</option>
                                    <option value="1year">過去1年</option>
                                </select>
                            </div>
                        </div>
                        <div class="chart-content">
                            <canvas id="categoryTrendChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- カテゴリ比較ビュー -->
            <div id="categoryComparisonView" class="category-view">
                <div class="comparison-controls">
                    <div class="comparison-selectors">
                        <div class="selector-group">
                            <label>比較対象A</label>
                            <select id="comparisonA">
                                <option value="all">全体平均</option>
                                <option value="dept_sales">営業部</option>
                                <option value="dept_dev">開発部</option>
                                <option value="dept_marketing">マーケティング部</option>
                            </select>
                        </div>
                        <div class="selector-group">
                            <label>比較対象B</label>
                            <select id="comparisonB">
                                <option value="dept_sales" selected>営業部</option>
                                <option value="dept_dev">開発部</option>
                                <option value="dept_marketing">マーケティング部</option>
                            </select>
                        </div>
                        <button class="compare-btn" onclick="updateComparison()">比較実行</button>
                    </div>
                </div>

                <div class="comparison-results">
                    <!-- 比較レーダーチャート -->
                    <div class="comparison-chart-container">
                        <div class="chart-header">
                            <h3>📊 カテゴリ別比較レーダー</h3>
                        </div>
                        <div class="chart-content">
                            <canvas id="comparisonRadarChart"></canvas>
                        </div>
                    </div>

                    <!-- 比較差分チャート -->
                    <div class="comparison-chart-container">
                        <div class="chart-header">
                            <h3>📈 カテゴリ別差分チャート</h3>
                        </div>
                        <div class="chart-content">
                            <canvas id="comparisonDifferenceChart"></canvas>
                        </div>
                    </div>

                    <!-- 比較データテーブル -->
                    <div class="comparison-table-container">
                        <div class="chart-header">
                            <h3>📋 詳細比較データ</h3>
                        </div>
                        <div class="comparison-table-wrapper">
                            <table class="comparison-table" id="comparisonDataTable">
                                <thead>
                                    <tr>
                                        <th>カテゴリ</th>
                                        <th>対象A 満足度</th>
                                        <th>対象A 期待度</th>
                                        <th>対象B 満足度</th>
                                        <th>対象B 期待度</th>
                                        <th>満足度差分</th>
                                        <th>期待度差分</th>
                                    </tr>
                                </thead>
                                <tbody id="comparisonTableBody">
                                    <!-- データはJavaScriptで挿入 -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- アクションアイテム -->
        <div class="actions-section">
            <div class="actions-container">
                <h3>🚀 推奨改善アクション</h3>
                <div class="action-items">
                    <div class="action-item high-priority">
                        <div class="priority-badge high">高</div>
                        <div class="action-content">
                            <h4>評価制度の透明性向上</h4>
                            <p>正当な評価に対する不満が最も高い。評価基準の明文化と定期的なフィードバック制度の導入を推奨。</p>
                            <div class="action-meta">
                                <span class="estimated-impact">予想効果: 満足度 +0.8pt</span>
                                <span class="timeline">実施期間: 3-6ヶ月</span>
                            </div>
                        </div>
                    </div>

                    <div class="action-item medium-priority">
                        <div class="priority-badge medium">中</div>
                        <div class="action-content">
                            <h4>残業管理・労働環境の改善</h4>
                            <p>労働時間と業務量のバランス改善が必要。タスク管理の効率化と適切な人員配置を検討。</p>
                            <div class="action-meta">
                                <span class="estimated-impact">予想効果: 満足度 +0.6pt</span>
                                <span class="timeline">実施期間: 2-4ヶ月</span>
                            </div>
                        </div>
                    </div>

                    <div class="action-item low-priority">
                        <div class="priority-badge low">低</div>
                        <div class="action-content">
                            <h4>教育・研修制度の拡充</h4>
                            <p>スキルアップ機会への期待が高い。外部研修参加支援やメンタープログラムの導入を検討。</p>
                            <div class="action-meta">
                                <span class="estimated-impact">予想効果: 満足度 +0.4pt</span>
                                <span class="timeline">実施期間: 6-12ヶ月</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            </div>

            <!-- 企業管理タブ -->
            <div id="companies" class="tab-content">
                <div class="companies-section">
                    <div class="section-header">
                        <h2>🏢 企業アカウント管理</h2>
                        <button class="action-button add-company-btn" onclick="showAddCompanyModal()">
                            ➕ 新規企業追加
                        </button>
                    </div>

                    <!-- 企業一覧 -->
                    <div class="companies-list">
                        <div class="companies-table-container">
                            <table class="companies-table">
                                <thead>
                                    <tr>
                                        <th>企業ID</th>
                                        <th>企業名</th>
                                        <th>アクセスキー</th>
                                        <th>URL発行上限</th>
                                        <th>現在のURL数</th>
                                        <th>状態</th>
                                        <th>作成日</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="companiesTableBody">
                                    <tr>
                                        <td colspan="8" class="loading">読み込み中...</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 新規企業追加モーダル -->
    <div id="addCompanyModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>🏢 新規企業追加</h2>
                <span class="close" onclick="closeAddCompanyModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>企業ID <span class="required">*</span></label>
                    <input type="text" id="newCompanyId" placeholder="例: abc-corporation" required>
                    <small>英数字とハイフンのみ使用可能</small>
                </div>
                <div class="form-group">
                    <label>企業名 <span class="required">*</span></label>
                    <input type="text" id="newCompanyName" placeholder="例: 株式会社ABC" required>
                </div>
                <div class="form-group">
                    <label>アクセスキー <span class="required">*</span></label>
                    <input type="text" id="newAccessKey" placeholder="例: secure123456" required>
                    <small>企業側ログインで使用するパスワード</small>
                </div>
                <div class="form-group">
                    <label>URL発行上限</label>
                    <input type="number" id="newMaxUrls" value="10" min="1" max="100">
                    <small>この企業が作成できるURL数の上限</small>
                </div>
                <div class="form-group">
                    <label>1URL当たりの回答上限</label>
                    <input type="number" id="newMaxResponsesPerUrl" value="1000" min="1" max="10000">
                    <small>1つのURLで受け取れる回答数の上限</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" onclick="closeAddCompanyModal()">キャンセル</button>
                <button class="submit-btn" onclick="createCompanyAccount()">企業を追加</button>
            </div>
        </div>
    </div>

    <!-- 企業編集モーダル -->
    <div id="editCompanyModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>✏️ 企業情報編集</h2>
                <span class="close" onclick="closeEditCompanyModal()">&times;</span>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editCompanyId">
                <div class="form-group">
                    <label>企業名 <span class="required">*</span></label>
                    <input type="text" id="editCompanyName" required>
                </div>
                <div class="form-group">
                    <label>アクセスキー <span class="required">*</span></label>
                    <input type="text" id="editAccessKey" required>
                </div>
                <div class="form-group">
                    <label>URL発行上限</label>
                    <input type="number" id="editMaxUrls" min="1" max="100">
                </div>
                <div class="form-group">
                    <label>1URL当たりの回答上限</label>
                    <input type="number" id="editMaxResponsesPerUrl" min="1" max="10000">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="editIsActive"> アカウントを有効化
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="cancel-btn" onclick="closeEditCompanyModal()">キャンセル</button>
                <button class="submit-btn" onclick="updateCompanyAccount()">更新</button>
            </div>
        </div>
    </div>

    <!-- URL管理モーダル -->
    <div id="urlModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>📋 調査URL管理</h2>
                <span class="close" onclick="closeUrlModal()">&times;</span>
            </div>
            <div class="modal-body">
                <!-- URL作成フォーム -->
                <div class="url-creation-form">
                    <h3>🚀 新しい調査URL作成</h3>
                    <div class="form-group">
                        <label>説明 (任意)</label>
                        <input type="text" id="urlDescription" placeholder="例: A部署向け調査">
                    </div>
                    <div class="form-group">
                        <label>最大回答数</label>
                        <input type="number" id="maxResponses" value="1" min="1" max="1000">
                    </div>
                    <div class="form-group">
                        <label>有効期限 (時間)</label>
                        <select id="expiresHours">
                            <option value="24">24時間</option>
                            <option value="72">3日間</option>
                            <option value="168">1週間</option>
                            <option value="720">1ヶ月</option>
                        </select>
                    </div>
                    <button class="create-url-btn" onclick="createSurveyUrl()">URL作成</button>
                </div>

                <!-- URL一覧 -->
                <div class="url-list">
                    <h3>📊 作成済みURL一覧</h3>
                    <div id="urlListContainer">
                        <div class="loading">読み込み中...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="admin-script.js"></script>
</body>
</html>